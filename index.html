<!DOCTYPE html>
<html>
  <head>
    <title>Lunch-Me</title>
    <link rel="stylesheet" type="text/css" href="public/css/reset.css">
     <link href='public/css/lunch.css' rel='stylesheet'>
      <link href='http://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
  </head>
  <body>
    <button class="button" data-option='burgers'>Burgers</button>
    <button class="button" data-option='sushi'>Sushi</button>
    <button class="button" data-option='beer'>Beer</button>
    <button class="button" data-option='noodles'>Noodles</button>
    <button class="button" data-option='doughnuts'>Doughnuts</button>

    <button class="button" data-option='coffee'>Coffee</button>

     <button class="button" data-option='cake'>Cake</button>

    <section id='results'> </section>



    <script src='https://code.jquery.com/jquery-2.0.3.min.js'></script>
    <script>
      $(document).ready(function(){
        var base_url ='https://api.foursquare.com/v2/venues/explore?client_id=J0IWD3NBN2YKHAI5U1GA1S1PJ5WPZYTPX5DSYKOLLC5QCSWO&client_secret=UFJUDAPQZUX5LDPMDHGK3XOPB4QDH5HPA13J1WTP1QPWA0SB&v=20130815&ll=51.523102,-0.087393&radius=1000'

// we collect data via this URI

        $('button').on('click',function(){
          var url = base_url + '&query=' + $(this).data('option');

//Adds an extra search function onto the end of the API

          $.get(url, function(data){
//Taking the data that URI generates
            var results = data.response.groups[0].items;
            results = results.sort(function(a,b){
              return b.venue.rating - a.venue.rating;
            })
            $('#results').html('');
            console.log('hello!');

            results.forEach(function(element, _, _){

// iterate over each object found - saving each one as a venue
              var venue = element.venue;

// take each of the elements attributes listed and display in the results section
              if(venue.price && venue.rating) {
                $("<article>"+ "<h1>"+venue.name+ "</h1>"+' '+ "<p id='rating'>"+venue.rating+'</p>'+"<h4>"+"Cost: "+venue.price.message+"</h4>"+"<p>"+' '+"<p>"+ venue.location.distance+" " + "meters away"+"</p>"+venue.location.formattedAddress[0]+' - '+ venue.location.formattedAddress[3]+"</p>"+"<img >"+"</article>").appendTo('#results').sort('#rating');
              }
            });

          });

        });

      });
    </script>
  </body>
</html>